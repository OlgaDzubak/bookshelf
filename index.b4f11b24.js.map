{"mappings":"qhBAAAA,EAAA,SAAAC,SAA8CC,KAAKC,MAAM,mMCAzDH,EAAA,S,sBCAA,IAAAI,EAAAJ,EAAA,S,aASA,MAAMK,EAAa,IAAI,EAAAD,EAAAE,UAEjBC,EAAkBC,SAASC,cAAc,sBAC/CF,EAAgBG,iBAAiB,QAASC,GAC1C,MAAMC,EAAWJ,SAASC,cAAc,cAClCI,EAAcL,SAASC,cAAc,kBAE3C,IAAIK,EAAcC,EAAmBC,EACjCC,GAAe,EAiDoFC,eAApFP,GAAoBQ,OAACA,IAQhC,GALIH,IACAA,EAAWI,QACXC,QAAQC,IAAI,+BAGVH,EAAOI,UAAUC,SAAS,uBAA4BL,EAAOI,UAAUC,SAAS,eAE/E,EAG4B,EAA/BC,EAAAC,kBAAiBX,EAAmBD,EAAcK,GAGE,MAA9CQ,EAAWR,EAAOS,GAAGC,MAAM,KAAKC,KAAK,OAG+C,GAAzE,wBAAbH,EAAoC,CAEpCf,EAASmB,UAAU,GACnB,MAAMC,GAAgB,EAAAP,EAAAQ,qBAAoBrB,EAAU,sBAE/CK,IACD,EAAAQ,EAAAS,gBAAetB,GAGnB,MAAMuB,GAAU,EAAAV,EAAAW,cAAaJ,GAE7BhB,EAAa,IAAIqB,gBACjB,MAAMC,QAuGqCpB,eAAlBqB,GAEjC,IACI,MAAMD,KAAEA,SAAejC,EAAWmC,YAAYD,GAC9C,OAAKD,EAAKG,OACHH,EADoBI,OAAOC,QAAQ,uE,CAG9C,MAAOC,GACH,GAAmB,iBAAfA,EAAMC,KAAwB,CAE9BxB,QAAQuB,MAAMA,GAEd,MAAME,EAAWtC,SAASuC,cAAc,OACxCnC,EAASoC,OAAOF,GAChBA,EAASvB,UAAU0B,IAAI,aACvBH,EAASf,UAAY,0F,CAGzB,MAAO,E,EAzHgBmB,CAAsBlC,GAIzC,GAFAmB,EAAQgB,SAEJb,EAAKG,OAAQ,CAEb,MAAMW,EAAgB5C,SAASuC,cAAc,MAC7CK,EAAc7B,UAAU0B,IAAI,OAAO,mBACnCjB,EAAcqB,MAAMD,GACpBA,EAAc1C,iBAAiB,QAAS4C,GAExC,MAAMC,EAAY/C,SAASgD,gBAAgBC,YAGvCL,EAAcrB,UAAY2B,EAA6BpB,EADvDiB,EAAY,IACiD,EACtDA,EAAY,MAAQA,GAAa,IACqB,EAEA,GAG5DtC,EAGDA,GAAe,GAFf,EAAAQ,EAAAS,gBAAetB,E,MAKpB,CAEHA,EAASmB,UAAU,GAEnB,MAAMC,GAAgB,EAAAP,EAAAQ,qBAAoBrB,EAAUO,EAAOS,KAE3D,EAAAH,EAAAS,gBAAetB,GAEf,MAAMuB,GAAU,EAAAV,EAAAW,cAAaJ,GAE7BhB,EAAa,IAAIqB,gBACjB,MAAMC,QAuFyCpB,eAAvBS,EAAUgC,GAC1C,IAEI,MAAMrB,KAAEA,SAAejC,EAAWuD,mBAAmBjC,EAAUgC,GAC/D,OAAKrB,EAAKG,OACHH,EADoBI,OAAOC,QAAQ,iCAAmChB,EAAW,2C,CAG5F,MAAOiB,GACH,GAAmB,iBAAfA,EAAMC,KAAwB,CAE9BxB,QAAQuB,MAAMA,GAEd,MAAME,EAAWtC,SAASuC,cAAc,OACxCnC,EAASoC,OAAOF,GAChBA,EAASvB,UAAU0B,IAAI,aACvBH,EAASf,UAAY,0F,CAGzB,MAAO,E,EAzGiB8B,CAAqBlC,EAAUX,GAInD,GAFAmB,EAAQgB,SAEJb,EAAKG,OAAQ,CAEb,MAAMqB,EAAoBtD,SAASuC,cAAc,MACjDf,EAAcqB,MAAMS,GACpBA,EAAkBvC,UAAU0B,IAAI,OAAQ,uBAExC,MAAMM,EAAY/C,SAASgD,gBAAgBC,YAGvCK,EAAkB/B,UAAYgC,EAA4BzB,EAD1DiB,EAAY,IACoD,EACzDA,EAAY,MAAQA,GAAa,IACwB,EAEA,IAEpE,EAAA9B,EAAAS,gBAAetB,E,IAQHM,eAAboC,EAAQU,GAEnBA,EAAMC,iBAEN,MAAM9C,OAAEA,GAAW6C,EAEf7C,EAAOI,UAAUC,SAAS,gBAE9Bb,EAAoBqD,E,CA6FhB,SAACN,EAA6BpB,EAAM4B,GA4BpC,OA1BW5B,EAAK6B,KAAI,EAACC,UAACA,EAASC,MAAEA,MACjC,MAAM1C,EAAW,yBAAyByC,QAE1C,GAAIC,EAAM5B,OAAQ,CAad,MAAO,mCAAmCd,yDAZpB0C,EAAMC,OAAO,EAAGJ,GAAQC,KAAI,EAACI,IAACA,EAAGC,WAAEA,EAAUC,MAAEA,EAAKC,OAAEA,KAC5E,kCAAkCH,yFAEdC,WAAoBC,qQAKZ,EAAAhD,EAAAkD,YAAWF,EAAO,yDAChB,EAAAhD,EAAAkD,YAAWD,EAAQ,mCACzC5C,KAAK,mGAI2DsC,qD,CAGxE,MAAO,6CAA6CzC,wKAEtC,IACdG,KAAK,G,CAKjB,SAASiC,EAA4BzB,EAAM4B,GAEvC,GAAG5B,EAAKG,OAAO,CAcX,OAbeH,EAAK6B,KAAI,EAACI,IAACA,EAAGC,WAAEA,EAAUE,OAAEA,EAAMD,MAAEA,KACnD,kCAAkCF,mFAEdC,WAAoBC,iPAKZ,EAAAhD,EAAAkD,YAAWF,EAAO,qDAChB,EAAAhD,EAAAkD,YAAWD,EAAQ,+BAE/C5C,KAAK,G,CAIH,MAAO,8L,CArSvBjB,EAAYH,iBAAiB,SAAS,MAClC,EAAAe,EAAAmD,YACA/D,EAAYU,UAAU0B,IAAI,gBAAgB,IAG9C4B,OAAOnE,iBAAiB,UAAU,MAAK,EAAAe,EAAAqD,eAAcjE,EAAY,IAOAK,kBAEzD,EAAAO,EAAAmD,YAGiE7D,EAA7CP,SAASuC,cAAc,MAC3ChC,EAAkBgE,YAAc,iBAChChE,EAAkBQ,UAAU0B,IAAI,qBAAsB,UACtDlC,EAAkBiE,aAAa,KAAK,uBACpCzE,EAAgB0E,QAAQlE,GACxBA,EAAkBmE,QAGT,MAAHC,GAAU,EAAA1D,EAAAW,cAAarB,GAGvBuB,QAmIqCpB,iBAC3C,IACI,MAAMoB,KAAEA,SAAejC,EAAW+E,kBAClC,OAAK9C,EAAKG,OAGHH,EAFII,OAAOC,QAAQ,uE,CAI9B,MAAOC,GACH,GAAmB,iBAAfA,EAAMC,KAAwB,CAE9BxB,QAAQuB,MAAMA,GAEd,MAAME,EAAWtC,SAASuC,cAAc,OACxChC,EAAkBsC,MAAMP,GACxBA,EAASvB,UAAU0B,IAAI,aACvBH,EAASf,UAAY,0F,CAE1B,MAAO,E,EArJSsD,GAGf/C,EAAKG,SAEL3B,EAAeN,SAASuC,cAAc,MACtChC,EAAkBsC,MAAMvC,GAExBA,EAAaS,UAAU0B,IAAI,iBAC3BnC,EAAaiB,UAiME,SAAWO,GAE9B,IAAIgD,EAAmB,GASvB,OAPAhD,EAAKiD,SAAQ5D,IACT,MAAM6D,EAAe,aAAa7D,EAASyC,mFACdzC,EAASyC,wDAEtCkB,GAAoBE,CAAY,IAG7BF,C,CA5MsBG,CAAyBnD,GAClD/B,EAAgBgB,UAAU0B,IAAI,gCAILkC,EAArBhC,Q,CAnChBuC,G,WC1BA,I,EAAAtF,EAAAJ,EAAA,S,aCAA2F,EAAiB,IAAAC,IAAoB5F,EAAA,SAAA6F,QAA6C,SAAQC,OAAAC,KAAAC,KAAEC,W,MCA5FC,EAAiB,IAAAN,IAAoB5F,EAAA,SAAA6F,QAA6C,SAAQC,OAAAC,KAAAC,KAAEC,WFK5F,MAAME,EAAQ,IAAI,EAAA/F,EAAAE,UAClB,IAAI8F,EAASC,EAEb,MAAMC,EAAiB9F,SAASC,cAAc,cACxC8F,EAAgB/F,SAASC,cAAc,wBACvC+F,EAAgBhG,SAASC,cAAc,oBACvCgG,EAAWjG,SAASC,cAAc,QAClCiG,EAAclG,SAASC,cAAc,WACrCkG,EAASnG,SAASC,cAAc,kBAEhCmG,EAAY,CACdC,eAAgB,EAChBC,iBACIF,EAAUC,eAAiBhC,OAAOkC,QAClCvG,SAASwG,KAAKzF,UAAU0B,IAAI,gBAC5B5B,QAAQC,IAAIsF,EAAUC,gBACtBrG,SAASwG,KAAKC,MAAMC,QAAU,SAASN,EAAUC,mB,EAGrDM,gBACI3G,SAASwG,KAAKzF,UAAU4B,OAAO,gBAC/B3C,SAASwG,KAAKC,MAAMC,QAAU,SAC9BrC,OAAOuC,OAAO,CAACC,IAAKT,EAAUC,gB,GAwBtC3F,eAAeoG,EAAkBC,GAEzBlB,IACAA,EAAWjF,QACXC,QAAQC,IAAI,8BAGhBsF,EAAUE,iBAEVtG,SAASE,iBAAiB,WAAWsD,IACf,WAAdA,EAAMwD,KACNC,GAAc,GAEnB,CAACC,MAAM,IAEV,IAEIrB,EAAa,IAAIhE,gBACjB,MAAMsF,QAAiBxB,EAAMyB,YAAYL,EAASlB,IAC5C3B,OAAEA,EAAMF,WAAEA,EAAUqD,YAAEA,EAAWpD,MAAEA,EAAKqD,UAAEA,GAAcH,EAASrF,KACjEyF,EAAWvH,SAASC,cAAc,iBAClCuH,EAAaxH,SAASC,cAAc,cACpCwH,EAAWzH,SAASC,cAAc,WAClCyH,EAAgB1H,SAASC,cAAc,gBACvC0H,EAAa3H,SAASC,cAAc,wBAE1CuH,EAAWjD,YAAcN,EACzBwD,EAASlD,YAAcL,EAGnBwD,EAAcnD,YADE,KAAhB8C,EAC4B,iBAEAA,EAGhCE,EAAShG,UAAc,aAAayC,WAAoBA,4CACxD2D,EAAWpG,UAAY,kGACgB+F,EAAU,GAAG9B,+GACSoC,EAAAzC,0OAKtBmC,EAAU,GAAG9B,+GACSoC,EAAAlC,gHAI7DK,EAAchF,UAAU8G,OAAO,aAC/B,MAAMC,EAAoBpI,KAAKC,MAAMoI,aAAaC,QAAQ,kBAEhC,OAAtBF,GAA+BA,EAAkBG,SAASlB,IAG1Db,EAAYnF,UAAU4B,OAAO,aAC7BwD,EAAOpF,UAAU4B,OAAO,cAHxBsD,EAASlF,UAAU4B,OAAO,Y,CAMhC,MAAOP,GACL,GAAmB,iBAAfA,EAAMC,KAAwB,CAC9BxB,QAAQuB,MAAM,OACdvB,QAAQuB,MAAMA,GAEd,MAAME,EAAYtC,SAASC,cAAc,yBAAyBsC,cAAc,OAChFyD,EAAcnD,MAAMP,GACpBA,EAASvB,UAAU0B,IAAI,aACvBH,EAASf,UAAY,0F,GAQjC,SAAS0F,IACLb,EAAUO,gBACVZ,EAAchF,UAAU0B,IAAI,aAC5ByD,EAAYnF,UAAU0B,IAAI,aAC1BwD,EAASlF,UAAU0B,IAAI,aACvB0D,EAAOpF,UAAU0B,IAAI,Y,CAnGzBqD,EAAe5F,iBAAiB,SAEhC,UAAkBS,OAACA,IACfE,QAAQqH,IAAIvH,GACRA,EAAOI,UAAUC,SAAS,aAAeL,EAAOI,UAAUC,SAAS,YACnE4E,EAAUjF,EAAOwH,cAAcA,cAAcC,QAAQhH,GACrD0F,EAAkBlB,IAEXjF,EAAOI,UAAUC,SAAS,oBAEjC4E,EAAUjF,EAAOwH,cAAcA,cAAcA,cAAcC,QAAQhH,GACnE0F,EAAkBlB,KAEXjF,EAAOI,UAAUC,SAAS,eAAiBL,EAAOI,UAAUC,SAAS,aAE5E4E,EAAUjF,EAAOwH,cAAcC,QAAQhH,GACvC0F,EAAkBlB,G,IA4E1BI,EAAc9F,iBAAiB,QAAS+G,GAUxChB,EAAS/F,iBAAiB,SAG1B,WACI+F,EAASlF,UAAU0B,IAAI,aACvByD,EAAYnF,UAAU4B,OAAO,aAC7BwD,EAAOpF,UAAU4B,OAAO,aACxB,MAAM0F,EAAWN,aAAaC,QAAQ,iBACtC,IAAIM,EAAQ5I,KAAKC,MAAM0I,GAET,OAAVC,IACAA,EAAQ,IAEZA,EAAMC,KAAK3C,GACXmC,aAAaS,QAAQ,gBAAiB9I,KAAK+I,UAAUH,KACrD,EAAArH,EAAAyH,kCAAiCJ,E,IAdrCpC,EAAYhG,iBAAiB,SAiB7B,WACI+F,EAASlF,UAAU4B,OAAO,aAC1BuD,EAAYnF,UAAU0B,IAAI,aAC1B0D,EAAOpF,UAAU0B,IAAI,aACrB,MAAM4F,EAAWN,aAAaC,QAAQ,iBAChCM,EAAQ5I,KAAKC,MAAM0I,GACzB,IAAIM,EAAIL,EAAMM,QAAQhD,GACtB0C,EAAMxE,OAAO6E,EAAG,GAChBZ,aAAac,WAAW,iBACxBd,aAAaS,QAAQ,gBAAiB9I,KAAK+I,UAAUH,KACrD,EAAArH,EAAAyH,kCAAiCJ,E,0BFtJrC,MAAMQ,EAAa9I,SAASC,cAAc,oBACpC8I,EAAmB/I,SAASC,cAAc,2BAChD6I,EAAW/H,UAAU8G,OAAO,YAC5BkB,EAAiBhI,UAAU8G,OAAO","sources":["node_modules/@parcel/runtime-js/lib/runtime-73e575141738cedd.js","src/index.js","src/js/books.js","src/js/book_modal_window.js","node_modules/@parcel/runtime-js/lib/runtime-e8fa9e2909d39e0c.js","node_modules/@parcel/runtime-js/lib/runtime-47782d6dec49ee78.js"],"sourcesContent":["require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"5ZPII\\\":\\\"index.b4f11b24.js\\\",\\\"cKEZp\\\":\\\"amazon_icon.ee2c0db3.svg\\\",\\\"gcCvB\\\":\\\"ibooks.41e12916.svg\\\",\\\"d1j6q\\\":\\\"index.b4e3a0f5.js\\\"}\"));","import './js/header';\nimport './js/isChangeTheme';\nimport './js/support_ukraine';\nimport './js/books';\n\nimport './js/autorization_modal_window';\nimport './js/book_modal_window';\nimport './js/mobile_menu';\nimport './js/about_us_modal_window';\n\n\nconst homeLinkEl = document.querySelector('.js-nav-homelink');\nconst mobileHomeLinkEl = document.querySelector('.js-mobile-nav-homelink');\nhomeLinkEl.classList.toggle('selected');\nmobileHomeLinkEl.classList.toggle('mobile-selected');","import { booksAPI } from './booksAPI';\nimport { shortTitle, \n         createLoader, \n         createBooksBoxTitle, \n         changeActiveItem, \n         scrollToBoxTop, \n         scrollUp,\n         scrollTracker } from './help_functions';\n\nconst fetchBooks = new booksAPI();\n\nconst categoryListBox = document.querySelector(\".category-list-box\");\ncategoryListBox.addEventListener('click', showBooksOfCategory);\nconst booksBox = document.querySelector(\".books-box\");\nconst scrollUpBtn = document.querySelector('.btn-up-scroll');\n\nlet categoryList, itemAllCategories, abortCtrl1;\nlet firstLoading = true;\n\nscrollUpBtn.addEventListener('click', ()=>{\n    scrollUp(); \n    scrollUpBtn.classList.add('is-hidden-btn');\n});\n\nwindow.addEventListener('scroll', ()=>{scrollTracker(scrollUpBtn)});\n\nshowCategoryList();  \n\n// ФУНКЦІЇ виводу даних на сайт ----------------------------------------------------------------------------------\n\n        // Відправлення запиту і формування списку під час завантаження сторінки \n    async function showCategoryList() {\n        \n        scrollUp();\n        \n        //створюємо заголовок All categories і відразу натискаємо на нього, щоб визвати завантаження Best Sellers Books\n        itemAllCategories = document.createElement(\"h3\");\n        itemAllCategories.textContent = \"All categories\"\n        itemAllCategories.classList.add(\"category-list-item\", \"active\");\n        itemAllCategories.setAttribute(\"id\",\"all-categories-item\");\n        categoryListBox.prepend(itemAllCategories);\n        itemAllCategories.click();\n\n        //створюємо loader\n        const loader1 = createLoader(itemAllCategories);\n        \n        //завантажуємо з сервера список категорій книжок\n        const data = await fetchCategoryList();\n\n        //якщо отримали непусті дані, то малюємо розмітку\n        if (data.length) {\n\n            categoryList = document.createElement(\"ul\");\n            itemAllCategories.after(categoryList);\n            \n            categoryList.classList.add(\"category-list\");\n            categoryList.innerHTML = createCategoryListMarkup(data);\n            categoryListBox.classList.add(\"category-list-box-not-empty\");\n        }\n\n        //видаляємо loader після виконання запиту\n        loader1.remove(); \n        \n    };\n\n        // Обробка події натискання категорії в меню категорій книжок (відправлення запиту і формування списку книг категорії)\n    async function showBooksOfCategory({target}){\n        \n        //відміна попереднього запиту best-books або category-books\n        if (abortCtrl1) {\n            abortCtrl1.abort();\n            console.log(\"abort previous books fetch\");\n        }\n\n        if ((!target.classList.contains('category-list-item')) && (!target.classList.contains('js-btn-more'))){\n            return;\n        } else {\n\n            // переносимо клас .active на обрану категорію\n            changeActiveItem(itemAllCategories, categoryList, target);\n\n            //формуємо категорію в потрібному форматі для запиту на сервер\n            const category = target.id.split(\" \").join(\"%20\");\n            \n            //якщо оано пункт All categories, то формуємо список Best Sellers Books, якщо обрано іншу категорію, то формуємо список книжок для цієї категорії\n            if (category === 'all-categories-item') {\n\n                booksBox.innerHTML=\"\";\n                const booksBoxTitle = createBooksBoxTitle(booksBox, \"Best Sellers Books\");\n\n                if (!firstLoading) { \n                    scrollToBoxTop(booksBox);\n                }\n\n                const loader2 = createLoader(booksBoxTitle);\n\n                abortCtrl1 = new AbortController();\n                const data = await fetchBestSellersBooks(abortCtrl1);\n        \n                loader2.remove();\n        \n                if (data.length) {\n        \n                    const bestBooksList = document.createElement(\"ul\");\n                    bestBooksList.classList.add(\"list\",\"best-books-list\");\n                    booksBoxTitle.after(bestBooksList);\n                    bestBooksList.addEventListener('click', seeMore);\n        \n                    const pageWidth = document.documentElement.scrollWidth;\n        \n                    if (pageWidth < 768) {\n                        bestBooksList.innerHTML = createBestSellersBooksMarcup(data, 1);\n                    } else if (pageWidth < 1440 && pageWidth >= 768) {\n                        bestBooksList.innerHTML = createBestSellersBooksMarcup(data, 3);\n                    } else {\n                        bestBooksList.innerHTML = createBestSellersBooksMarcup(data, 5);\n                    }\n\n                    if (!firstLoading) {\n                        scrollToBoxTop(booksBox);\n                    }else {\n                        firstLoading = false;\n                    }\n                }\n            } else {\n                         \n                booksBox.innerHTML=\"\";\n                \n                const booksBoxTitle = createBooksBoxTitle(booksBox, target.id);\n\n                scrollToBoxTop(booksBox);\n\n                const loader2 = createLoader(booksBoxTitle);\n                \n                abortCtrl1 = new AbortController();\n                const data  = await fetchBooksOfCategory(category, abortCtrl1);\n                \n                loader2.remove();\n\n                if (data.length) {\n\n                    const categoryBooksList = document.createElement(\"ul\");\n                    booksBoxTitle.after(categoryBooksList);\n                    categoryBooksList.classList.add(\"list\", \"category-books-list\");\n\n                    const pageWidth = document.documentElement.scrollWidth;\n\n                    if (pageWidth < 768) {\n                        categoryBooksList.innerHTML = createBooksOfCategoryMarcup(data, 1);\n                    } else if (pageWidth < 1440 && pageWidth >= 768) {\n                        categoryBooksList.innerHTML = createBooksOfCategoryMarcup(data, 3);\n                    } else {\n                        categoryBooksList.innerHTML = createBooksOfCategoryMarcup(data, 5);\n                    }\n                    scrollToBoxTop(booksBox);\n\n                }\n            }\n        }\n    }\n\n        //Обробка події натискання кнопки seeMore\n    async function seeMore(event) {\n    \n        event.preventDefault();\n            \n        const { target } = event;\n                \n        if(!target.classList.contains('js-btn-more')) { return; }\n\n        showBooksOfCategory(event);\n    }\n    \n\n\n// ФУНКЦІЇ завантаження даних з бекенду -------------------------------------------------------------------------\n        \n        // Функція запиту на отримання назв категорій від бекенду\n    async function fetchCategoryList() {\n        try {\n            const { data } = await fetchBooks.getCategoryList();\n            if (!data.length) { \n                return Notify.failure(\"Can't find list of categories on the server. Please reload the page!\"); \n            }\n            return data;\n        }\n        catch (error) {\n            if (error.code !== 'ERR_CANCELED'){\n                \n                console.error(error);\n\n                const errorBox = document.createElement(\"div\");\n                itemAllCategories.after(errorBox);\n                errorBox.classList.add(\"error-box\");\n                errorBox.innerHTML = `<p class=\"error-box-text\">Sorry, there was a server error, please reload the page!!!</p>`;\n            }\n           return [];\n        } \n    }\n        // Функція запиту на отримання списку найкращіх книжок від бекенду\n    async function fetchBestSellersBooks(abortCtrl1) {\n\n        try {\n            const { data } = await fetchBooks.getTopBooks(abortCtrl1);\n            if (!data.length) { return Notify.failure(\"Can't find best sellers books on the server. Please reload the page!\"); }\n            return data;\n        }\n        catch (error){\n            if (error.code !== 'ERR_CANCELED'){\n\n                console.error(error);\n\n                const errorBox = document.createElement(\"div\");\n                booksBox.append(errorBox);\n                errorBox.classList.add(\"error-box\");\n                errorBox.innerHTML = `<p class=\"error-box-text\">Sorry, there was a server error, please reload the page!!!</p>`;\n\n            }\n            return [];\n        }\n    }\n        // Функція запиту на отримання списку книг однієї категорії від бекенду\n    async function fetchBooksOfCategory(category, abortCtrl1) {\n        try {\n\n            const { data } = await fetchBooks.getBooksByCategory(category, abortCtrl1);\n            if (!data.length) { return Notify.failure(\"Can't find books of category <\" + category + \"> on the server. Please reload the page!\"); }\n            return data;\n        }\n        catch (error) {\n            if (error.code !== 'ERR_CANCELED'){\n\n                console.error(error);\n\n                const errorBox = document.createElement(\"div\");\n                booksBox.append(errorBox);\n                errorBox.classList.add(\"error-box\");\n                errorBox.innerHTML = `<p class=\"error-box-text\">Sorry, there was a server error, please reload the page!!!</p>`;\n\n            }\n            return [];\n        } \n    }\n\n\n\n// ФУНКЦІЇ формування розмітки -----------------------------------------------------------------------------------\n\n        // розмітка списку категорій\n    function createCategoryListMarkup(data) {\n\n        let categoryListHTML = \"\";\n\n        data.forEach(category => {\n            const categoryLink = `  <li id=\"${category.list_name}\" class=\"category-list-item\"> \n                                       ${category.list_name}\n                                    </li> `;\n            categoryListHTML += categoryLink;\n        });\n\n        return categoryListHTML;\n    };\n        // розмітка best sellers books\n    function createBestSellersBooksMarcup(data, querty) {\n\n        const markup = data.map(({list_name, books}) => {\n            const category = `<p class=\"theme-book\">${list_name}</p>`;\n\n            if (books.length) {\n                let booksOfCategory = books.splice(0, querty).map(({_id, book_image, title, author}) => \n                `<li class=\"item-book\" data-id=\"${_id}\">\n                    <div class=\"img-owerlay\">\n                        <img src=\"${book_image}\" alt=\"${title}\" class=\"img-book\" loading=\"auto\">\n                        <div class=\"owerlay\">\n                            <p class=\"owerlay-content\">quick view</p>\n                        </div>\n                    </div>\n                    <p class=\"title-book\">${shortTitle(title, 17)}</p>\n                    <p class=\"title-author\">${shortTitle(author, 34)}</p>\n                </li>`).join('');\n\n                return `<li class=\"best-book-container\">${category}\n                            <ul class=\"list-books\">${booksOfCategory}</ul>\n                            <button type=\"button\" class=\"button-more js-btn-more\" id=\"${list_name}\">See more</button>\n                        </li>`\n            } else {\n                return `<li class=\"off-books best-book-container\">${category}\n                            <p class=\"off-books-text\">Sorry, there are no books in this category, please choose another category</p>\n                        </li>`\n            }}).join('');\n\n            return markup;\n    }\n        // розмітка books of category\n    function createBooksOfCategoryMarcup(data, querty) {\n\n        if(data.length){\n            const markup = data.map(({_id, book_image, author, title}) => \n            `<li class=\"item-book\" data-id=\"${_id}\">  \n                <div class=\"img-owerlay\">\n                    <img src=\"${book_image}\" alt=\"${title}\" class=\"img-book loading=\"auto\"\">\n                    <div class=\"owerlay\">\n                        <p class=\"owerlay-content\">quick view</p>\n                    </div>\n                </div>\n                <p class=\"title-book\">${shortTitle(title, 17)}</p>\n                <p class=\"title-author\">${shortTitle(author, 34)}</p>\n            </li>`\n            ).join('')\n\n            return markup;\n        } else {\n                return `<liv class=\"off-books\">\n                            <p class=\"off-books-text\">Sorry, there are no books in this category, please choose another category</p>\n                        </li>`\n        }\n    }","import { booksAPI } from './booksAPI';\nimport { displayOrdredAmountInShoppingBag } from './help_functions';\nimport amazon from '/src/images/svg/amazon_icon.svg';\nimport appleBook from '/src/images/svg/ibooks.svg';\n\nconst books = new booksAPI;\nlet book_Id, abortCtrl1;\n\nconst divContainerEl = document.querySelector('.books-box');\nconst divBackdropEl = document.querySelector('.book-modal-backdrop');\nconst btnCloseModal = document.querySelector('.btn-modal-close');\nconst btnAddEl = document.querySelector('.add');\nconst btnRemoveEl = document.querySelector('.remove');\nconst textEl = document.querySelector('.modal-message');\n\nconst objScroll = {\n    scrollPosition: 0,\n    disabledScroll() {\n        objScroll.scrollPosition = window.scrollY;\n        document.body.classList.add('block-scroll');\n        console.log(objScroll.scrollPosition);\n        document.body.style.cssText = `top: -${objScroll.scrollPosition}px;`;\n    },\n\n    enabledScroll() {\n        document.body.classList.remove('block-scroll');\n        document.body.style.cssText = `top: 0`\n        window.scroll({top: objScroll.scrollPosition})\n    },\n}\n\ndivContainerEl.addEventListener('click', onReadId);\n\nfunction onReadId({target}) {\n    console.dir(target);\n    if (target.classList.contains('img-book') || target.classList.contains('owerlay')) {\n        book_Id = target.parentElement.parentElement.dataset.id;\n        createModalWindow(book_Id);\n        \n    } else if (target.classList.contains('owerlay-content')) {\n\n        book_Id = target.parentElement.parentElement.parentElement.dataset.id;\n        createModalWindow(book_Id);\n\n    } else if (target.classList.contains('title-book') || target.classList.contains('author')) {\n\n        book_Id = target.parentElement.dataset.id;\n        createModalWindow(book_Id);\n    }\n}\n\nasync function createModalWindow(book_Id) {\n\n    if (abortCtrl1) {\n        abortCtrl1.abort();\n        console.log(\"abort previous book fetch\");\n    }\n\n    objScroll.disabledScroll();\n\n    document.addEventListener(\"keydown\", event => {\n        if (event.key === 'Escape') {\n            onCloseModal();\n        }\n    }, {once: true} );\n\n    try {\n\n        abortCtrl1 = new AbortController;\n        const response = await books.getBookById(book_Id, abortCtrl1);\n        const { author, book_image, description, title, buy_links } = response.data;\n        const imageBox = document.querySelector('.book-img-div');\n        const nameBookEl = document.querySelector('#name-book');\n        const authorEl = document.querySelector('#author');\n        const descriptionEl = document.querySelector('#description');\n        const marketPlEl = document.querySelector('.market_placers_list');\n     \n        nameBookEl.textContent = title;\n        authorEl.textContent = author;\n\n        if (description === '') {\n            descriptionEl.textContent = 'No description';\n        } else {\n            descriptionEl.textContent = description;\n        }\n        \n        imageBox.innerHTML =   `<img src=\"${book_image}\" alt=\"${book_image}\" class=\"book-img-modal\" loading=\"auto\">`;\n        marketPlEl.innerHTML = `<li class=\"marketplacer_li marketplacer_li_one\">\n                                    <a href=\"${buy_links[0].url}\" class=\"marketplacer_li_link link\">\n                                    <img class=\"image-market\" src=\"${amazon}\" alt=\"amazon\">  \n                                    </a>\n                                </li>\n\n                                <li class=\"marketplacer_li marketplacer_li_two\">\n                                    <a href=\"${buy_links[1].url}\" class=\"marketplacer_li_link link\">\n                                    <img class=\"image-market\" src=\"${appleBook}\" alt=\"apple-books\">      \n                                    </a>\n                                </li>`\n\n        divBackdropEl.classList.toggle('is-hidden');\n        const orderedBookID_arr = JSON.parse(localStorage.getItem('orderedBookID'));\n\n        if (orderedBookID_arr === null || !orderedBookID_arr.includes(book_Id)) {\n            btnAddEl.classList.remove('is-hidden');\n        } else {\n            btnRemoveEl.classList.remove('is-hidden');\n            textEl.classList.remove('is-hidden');\n        }\n\n    } catch (error) {\n        if (error.code !== 'ERR_CANCELED'){\n            console.error(\"тут\");    \n            console.error(error);\n\n            const errorBox =  document.querySelector(\".book-modal-container\").createElement(\"div\");\n            btnCloseModal.after(errorBox);\n            errorBox.classList.add(\"error-box\");\n            errorBox.innerHTML = `<p class=\"error-box-text\">Sorry, there was a server error, please reload the page!!!</p>`;\n        }\n    }\n    \n};\n\nbtnCloseModal.addEventListener('click', onCloseModal);\n\nfunction onCloseModal() {\n    objScroll.enabledScroll();\n    divBackdropEl.classList.add('is-hidden');\n    btnRemoveEl.classList.add('is-hidden');\n    btnAddEl.classList.add('is-hidden');\n    textEl.classList.add('is-hidden');\n}\n\nbtnAddEl.addEventListener('click', addLocalStorage);\nbtnRemoveEl.addEventListener('click', removeLocalStorage);\n\nfunction addLocalStorage() {\n    btnAddEl.classList.add('is-hidden');\n    btnRemoveEl.classList.remove('is-hidden');\n    textEl.classList.remove('is-hidden');\n    const dataJson = localStorage.getItem('orderedBookID');\n    let arrLs = JSON.parse(dataJson); //book_Id\n    /* console.log(arrLs) */\n    if (arrLs === null) {\n        arrLs = [];\n    }\n    arrLs.push(book_Id);\n    localStorage.setItem('orderedBookID', JSON.stringify(arrLs));\n    displayOrdredAmountInShoppingBag(arrLs)\n};\n\nfunction removeLocalStorage() {\n    btnAddEl.classList.remove('is-hidden');\n    btnRemoveEl.classList.add('is-hidden');\n    textEl.classList.add('is-hidden');\n    const dataJson = localStorage.getItem('orderedBookID');\n    const arrLs = JSON.parse(dataJson);\n    let i = arrLs.indexOf(book_Id);\n    arrLs.splice(i, 1);\n    localStorage.removeItem('orderedBookID')\n    localStorage.setItem('orderedBookID', JSON.stringify(arrLs));\n    displayOrdredAmountInShoppingBag(arrLs)\n};","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"cKEZp\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"gcCvB\")).toString();"],"names":["parcelRequire","register","JSON","parse","$aiKfP","$b05efa7c4b0aa6bf$var$fetchBooks","booksAPI","$b05efa7c4b0aa6bf$var$categoryListBox","document","querySelector","addEventListener","$b05efa7c4b0aa6bf$var$showBooksOfCategory","$b05efa7c4b0aa6bf$var$booksBox","$b05efa7c4b0aa6bf$var$scrollUpBtn","$b05efa7c4b0aa6bf$var$categoryList","$b05efa7c4b0aa6bf$var$itemAllCategories","$b05efa7c4b0aa6bf$var$abortCtrl1","$b05efa7c4b0aa6bf$var$firstLoading","async","target","abort","console","log","classList","contains","$hqv3x","changeActiveItem","category","id","split","join","innerHTML","booksBoxTitle","createBooksBoxTitle","scrollToBoxTop","loader2","createLoader","AbortController","data","abortCtrl11","getTopBooks","length","Notify","failure","error","code","errorBox","createElement","append","add","$b05efa7c4b0aa6bf$var$fetchBestSellersBooks","remove","bestBooksList","after","$b05efa7c4b0aa6bf$var$seeMore","pageWidth","documentElement","scrollWidth","$b05efa7c4b0aa6bf$var$createBestSellersBooksMarcup","abortCtrl12","getBooksByCategory","$b05efa7c4b0aa6bf$var$fetchBooksOfCategory","categoryBooksList","$b05efa7c4b0aa6bf$var$createBooksOfCategoryMarcup","event","preventDefault","querty","map","list_name","books","splice","_id","book_image","title","author","shortTitle","scrollUp","window","scrollTracker","textContent","setAttribute","prepend","click","loader1","getCategoryList","$b05efa7c4b0aa6bf$var$fetchCategoryList","categoryListHTML","forEach","categoryLink","$b05efa7c4b0aa6bf$var$createCategoryListMarkup","$b05efa7c4b0aa6bf$var$showCategoryList","$5f530e84bfbd7482$exports","URL","resolve","import","meta","url","toString","$97c2c017474eee27$exports","$2092355dfbe39e27$var$books","$2092355dfbe39e27$var$book_Id","$2092355dfbe39e27$var$abortCtrl1","$2092355dfbe39e27$var$divContainerEl","$2092355dfbe39e27$var$divBackdropEl","$2092355dfbe39e27$var$btnCloseModal","$2092355dfbe39e27$var$btnAddEl","$2092355dfbe39e27$var$btnRemoveEl","$2092355dfbe39e27$var$textEl","$2092355dfbe39e27$var$objScroll","scrollPosition","disabledScroll","scrollY","body","style","cssText","enabledScroll","scroll","top","$2092355dfbe39e27$var$createModalWindow","book_Id1","key","$2092355dfbe39e27$var$onCloseModal","once","response","getBookById","description","buy_links","imageBox","nameBookEl","authorEl","descriptionEl","marketPlEl","$parcel$interopDefault","toggle","orderedBookID_arr","localStorage","getItem","includes","dir","parentElement","dataset","dataJson","arrLs","push","setItem","stringify","displayOrdredAmountInShoppingBag","i","indexOf","removeItem","$1f0dc3b9307be026$var$homeLinkEl","$1f0dc3b9307be026$var$mobileHomeLinkEl"],"version":3,"file":"index.b4f11b24.js.map"}