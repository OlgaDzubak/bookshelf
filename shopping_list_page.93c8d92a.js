function t(t,e,n,s){Object.defineProperty(t,e,{get:n,set:s,enumerable:!0,configurable:!0})}function e(t){return t&&t.__esModule?t.default:t}var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},s={},l={},r=n.parcelRequire3984;null==r&&((r=function(t){if(t in s)return s[t].exports;if(t in l){var e=l[t];delete l[t];var n={id:t,exports:{}};return s[t]=n,e.call(n.exports,n,n.exports),n.exports}var r=new Error("Cannot find module '"+t+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(t,e){l[t]=e},n.parcelRequire3984=r),r.register("kyEFX",(function(e,n){var s,l;t(e.exports,"register",(function(){return s}),(function(t){return s=t})),t(e.exports,"resolve",(function(){return l}),(function(t){return l=t}));var r={};s=function(t){for(var e=Object.keys(t),n=0;n<e.length;n++)r[e[n]]=t[e[n]]},l=function(t){var e=r[t];if(null==e)throw new Error("Could not resolve bundle with id "+t);return e}})),r("kyEFX").register(JSON.parse('{"jDSjF":"shopping_list_page.93c8d92a.js","cKEZp":"amazon_icon.9b1c5987.svg","gcCvB":"ibooks.41e12916.svg","8xNye":"trash-03.deb29b96.png","0398L":"stack_of_books_mobile@1x.76e2e048.png","3jUnA":"stack_of_books_mobile@2x.64a22462.png","ax4SW":"stack_of_books_tablet@1x.76e2e048.png","4uYZ5":"stack_of_books_tablet@2x.64a22462.png","l1WNw":"stack_of_books_desktop@1x.76e2e048.png","bA58A":"stack_of_books_desktop@2x.64a22462.png","d1j6q":"index.cc500168.js"}')),r("jeON5"),r("bUb57");var o=r("aiKfP"),a=r("hqv3x");function c(t,e,n,s){const l=Math.ceil(t/e),r=document.createElement("div");return r.classList.add(s),r.innerHTML=function(t,e){let n="";n='<button type="button" class="pgn-btn left-double-arrow-btn">\n                        <svg class="left-double-arrow-svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 13 13">\n                        <path class="left-double-arrow-svg path" fill="var(--pgn-fill-color)" d="M9.71589,11.6509c-.08592-.0852-.15412-.1866-.20065-.2983s-.0705-.2316-.0705-.3526.02396-.2408.0705-.3525.11473-.2131.20065-.2983L13.9234,6.15086c.0859-.08522.1541-.1866.2006-.29831s.0705-.23152.0705-.35253-.0239-.24082-.0705-.35253-.1147-.21309-.2006-.2983c-.1718-.17073-.4041-.26656-.6463-.26656s-.4745.09583-.6462.26656L8.42339,9.05669C7.9084,9.57232,7.61914,10.2713,7.61914,11s.28926,1.4277.80425,1.9434l4.20751,4.2075c.1707.1693.4012.2648.6417.2658.1206.0007.2402-.0224.3519-.068s.2132-.1129.2989-.1978c.0859-.0852.1541-.1866.2006-.2983s.0705-.2315.0705-.3526-.0239-.2408-.0705-.3525-.1147-.2131-.2006-.2983L9.71589,11.6509Z" transform="translate(-7.40682-4.499673)"/>\n                        <path class="left-double-arrow-svg path" fill="var(--pgn-fill-color)" d="M9.71589,11.6509c-.08592-.0852-.15412-.1866-.20065-.2983s-.0705-.2316-.0705-.3526.02396-.2408.0705-.3525.11473-.2131.20065-.2983L13.9234,6.15086c.0859-.08522.1541-.1866.2006-.29831s.0705-.23152.0705-.35253-.0239-.24082-.0705-.35253-.1147-.21309-.2006-.2983c-.1718-.17073-.4041-.26656-.6463-.26656s-.4745.09583-.6462.26656L8.42339,9.05669C7.9084,9.57232,7.61914,10.2713,7.61914,11s.28926,1.4277.80425,1.9434l4.20751,4.2075c.1707.1693.4012.2648.6417.2658.1206.0007.2402-.0224.3519-.068s.2132-.1129.2989-.1978c.0859-.0852.1541-.1866.2006-.2983s.0705-.2315.0705-.3526-.0239-.2408-.0705-.3525-.1147-.2131-.2006-.2983L9.71589,11.6509Z" transform="translate(-1.40682-4.499673)"/>\n                        </svg>\n                    </button><button type="button" class="pgn-btn left-arrow-btn">\n                        <svg class="left-arrow-svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 7.5 13">\n                        <path class="left-arrow-svg path" fill="var(--pgn-fill-color)"<path d="M9.71589,11.6509c-.08592-.0852-.15412-.1866-.20065-.2983s-.0705-.2316-.0705-.3526.02396-.2408.0705-.3525.11473-.2131.20065-.2983L13.9234,6.15086c.0859-.08522.1541-.1866.2006-.29831s.0705-.23152.0705-.35253-.0239-.24082-.0705-.35253-.1147-.21309-.2006-.2983c-.1718-.17073-.4041-.26656-.6463-.26656s-.4745.09583-.6462.26656L8.42339,9.05669C7.9084,9.57232,7.61914,10.2713,7.61914,11s.28926,1.4277.80425,1.9434l4.20751,4.2075c.1707.1693.4012.2648.6417.2658.1206.0007.2402-.0224.3519-.068s.2132-.1129.2989-.1978c.0859-.0852.1541-.1866.2006-.2983s.0705-.2315.0705-.3526-.0239-.2408-.0705-.3525-.1147-.2131-.2006-.2983L9.71589,11.6509Z" transform="translate(-7.40682-4.499673)""/>\n                        </svg>\n                    </button><button type="button" class="pgn-btn three-dots-btn left-three-dots-btn visually-hidden">\n                        <svg class="three-dots left-three-dots-svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 22 22">\n                        <ellipse rx="1.5" ry="1.5" fill="var(--pgn-fill-color)" transform="translate(4 16.516716)"/>\n                        <ellipse rx="1.5" ry="1.5" fill="var(--pgn-fill-color)" transform="translate(18 16.516716)"/>\n                        <ellipse rx="1.5" ry="1.5" fill="var(--pgn-fill-color)" transform="translate(11 16.516716)"/>\n                        </svg>\n                    </button>';for(let s=1;s<=t;s++)n+=s<=e?`<button type="button" class="pgn-btn number-btn">${s}</button>`:`<button type="button" class="pgn-btn number-btn visually-hidden">${s}</button>`;n+=t>e?'<button type="button" class="pgn-btn three-dots-btn right-three-dots-btn">\n                        <svg class="three-dots right-three-dots-svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 22 22">\n                            <ellipse class="right-three-dots-svg ellipse" rx="1.5" ry="1.5" fill="var(--pgn-fill-color)" transform="translate(4 16.516716)"/>\n                            <ellipse class="right-three-dots-svg ellipse" rx="1.5" ry="1.5" fill="var(--pgn-fill-color)" transform="translate(18 16.516716)"/>\n                            <ellipse class="right-three-dots-svg ellipse" rx="1.5" ry="1.5" fill="var(--pgn-fill-color)" transform="translate(11 16.516716)"/>\n                        </svg>\n                        </button>':'<button type="button" class="right-three-dots-btn visually-hidden">\n            <svg class="three-dots right-three-dots-svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 22 22">\n                <ellipse rx="1.5" ry="1.5" fill="var(--pgn-fill-color)" transform="translate(4 16.516716)"/>\n                <ellipse rx="1.5" ry="1.5" fill="var(--pgn-fill-color)" transform="translate(18 16.516716)"/>\n                <ellipse rx="1.5" ry="1.5" fill="var(--pgn-fill-color)" transform="translate(11 16.516716)"/>\n            </svg>\n            </button>';return n+='<button type="button" class="pgn-btn right-arrow-btn">\n                        <svg class="right-arrow-svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 7.5 13">\n                        <path class="right-arrow-svg path" fill="var(--pgn-fill-color)" d="M9.71589,11.6509c-.08592-.0852-.15412-.1866-.20065-.2983s-.0705-.2316-.0705-.3526.02396-.2408.0705-.3525.11473-.2131.20065-.2983L13.9234,6.15086c.0859-.08522.1541-.1866.2006-.29831s.0705-.23152.0705-.35253-.0239-.24082-.0705-.35253-.1147-.21309-.2006-.2983c-.1718-.17073-.4041-.26656-.6463-.26656s-.4745.09583-.6462.26656L8.42339,9.05669C7.9084,9.57232,7.61914,10.2713,7.61914,11s.28926,1.4277.80425,1.9434l4.20751,4.2075c.1707.1693.4012.2648.6417.2658.1206.0007.2402-.0224.3519-.068s.2132-.1129.2989-.1978c.0859-.0852.1541-.1866.2006-.2983s.0705-.2315.0705-.3526-.0239-.2408-.0705-.3525-.1147-.2131-.2006-.2983L9.71589,11.6509Z" transform="matrix(-1 0 0-1 15.40682 17.499673)"/>\n                        </svg>\n                    </button><button type="button" class="pgn-btn right-double-arrow-btn">\n                        <svg class="right-double-arrow-svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 13 13">\n                        <path class="right-double-arrow-svg path" fill="var(--pgn-fill-color)" d="M9.71589,11.6509c-.08592-.0852-.15412-.1866-.20065-.2983s-.0705-.2316-.0705-.3526.02396-.2408.0705-.3525.11473-.2131.20065-.2983L13.9234,6.15086c.0859-.08522.1541-.1866.2006-.29831s.0705-.23152.0705-.35253-.0239-.24082-.0705-.35253-.1147-.21309-.2006-.2983c-.1718-.17073-.4041-.26656-.6463-.26656s-.4745.09583-.6462.26656L8.42339,9.05669C7.9084,9.57232,7.61914,10.2713,7.61914,11s.28926,1.4277.80425,1.9434l4.20751,4.2075c.1707.1693.4012.2648.6417.2658.1206.0007.2402-.0224.3519-.068s.2132-.1129.2989-.1978c.0859-.0852.1541-.1866.2006-.2983s.0705-.2315.0705-.3526-.0239-.2408-.0705-.3525-.1147-.2131-.2006-.2983L9.71589,11.6509Z" transform="matrix(-1 0 0-1 14.40682 17.499673)"/>\n                        <path class="right-double-arrow-svg path" fill="var(--pgn-fill-color)" d="M9.71589,11.6509c-.08592-.0852-.15412-.1866-.20065-.2983s-.0705-.2316-.0705-.3526.02396-.2408.0705-.3525.11473-.2131.20065-.2983L13.9234,6.15086c.0859-.08522.1541-.1866.2006-.29831s.0705-.23152.0705-.35253-.0239-.24082-.0705-.35253-.1147-.21309-.2006-.2983c-.1718-.17073-.4041-.26656-.6463-.26656s-.4745.09583-.6462.26656L8.42339,9.05669C7.9084,9.57232,7.61914,10.2713,7.61914,11s.28926,1.4277.80425,1.9434l4.20751,4.2075c.1707.1693.4012.2648.6417.2658.1206.0007.2402-.0224.3519-.068s.2132-.1129.2989-.1978c.0859-.0852.1541-.1866.2006-.2983s.0705-.2315.0705-.3526-.0239-.2408-.0705-.3525-.1147-.2131-.2006-.2983L9.71589,11.6509Z" transform="matrix(-1 0 0-1 20.40682 17.499673)"/>\n                        </svg>\n                    </button> ',n}(l,n),r}function d(t,e){if(t&&e>0){const n=t.querySelectorAll(".number-btn");let s=[...n].filter((t=>!t.classList.contains("visually-hidden")));const l=s.length,r=t.querySelector(".left-double-arrow-btn"),o=t.querySelector(".left-arrow-btn"),i=t.querySelector(".right-double-arrow-btn"),a=t.querySelector(".right-arrow-btn"),c=t.querySelector(".left-three-dots-btn"),d=t.querySelector(".right-three-dots-btn");for(const t of n)Number(t.textContent)===e?(t.classList.add("active"),t.focus(),t.classList.contains("visually-hidden")&&(t.textContent<=s[0].textContent?(s[l-1].classList.add("visually-hidden"),d.classList.remove("visually-hidden")):(s[0].classList.add("visually-hidden"),c.classList.remove("visually-hidden"),Number(t.textContent)===n.length&&d.classList.add("visually-hidden")),t.classList.remove("visually-hidden"))):t.classList.remove("active");s=[...n].filter((t=>!t.classList.contains("visually-hidden"))),1===e?o.setAttribute("disabled",""):o.removeAttribute("disabled",""),e===n.length?a.setAttribute("disabled",""):a.removeAttribute("disabled",""),Number(s[l-1].textContent)===n.length?(i.setAttribute("disabled",""),d.classList.add("visually-hidden")):(i.removeAttribute("disabled",""),d.classList.remove("visually-hidden")),Number(s[l-1].textContent)-l<1?(r.setAttribute("disabled",""),c.classList.add("visually-hidden")):(r.removeAttribute("disabled",""),c.classList.remove("visually-hidden"))}return e}function u(t,e){const n=[...t.querySelectorAll(".number-btn")].filter((t=>!t.classList.contains("visually-hidden"))),s=Number(n[0].textContent),l=n.findIndex((t=>t.classList.contains("active")));let r=Number(n[l].textContent);if(e)if(s-e>=1){for(i=s-1;i>=s-e;i--)r=d(t,i);r=d(t,s-1)}else for(i=s-1;i>=1;i--)r=d(t,i);return r}function b(t,e){const n=t.querySelectorAll(".number-btn"),s=[...n].filter((t=>!t.classList.contains("visually-hidden"))),l=s.findIndex((t=>t.classList.contains("active"))),r=Number(s[l].textContent),o=s.length,a=Number(s[o-1].textContent),c=Number(n[n.length-1].textContent);let u=r;if(e)if(c-a>=e){for(i=a;i<=a+e;i++)u=d(t,i);u=d(t,a+1)}else for(i=a;i<=c;i++)u=d(t,i);return u}function g(t){const e=document.querySelectorAll(".number-btn"),n=[...e].filter((t=>!t.classList.contains("visually-hidden"))),s=n.findIndex((t=>t.classList.contains("active"))),l=n.length,r=n[0].textContent-l>1?n[0].textContent-l:1,o=r+(l-1);return e.forEach((t=>{t.textContent>=r&&t.textContent<=o?t.classList.remove("visually-hidden"):(t.classList.add("visually-hidden"),t.classList.contains("active")&&t.classList.remove("active"))})),d(t,r+s)}function p(t){const e=document.querySelectorAll(".number-btn"),n=[...e].filter((t=>!t.classList.contains("visually-hidden"))),s=n.findIndex((t=>t.classList.contains("active"))),l=n.length,r=Number(n[l-1].textContent)+l<e.length?Number(n[l-1].textContent)+1:e.length-(l-1),o=r+(l-1);return e.forEach((t=>{t.textContent>=r&&t.textContent<=o?t.classList.remove("visually-hidden"):(t.classList.add("visually-hidden"),t.classList.contains("active")&&t.classList.remove("active"))})),d(t,r+s)}function v(t){const e=t.querySelectorAll(".number-btn"),n=Number(t.querySelector(".number-btn.active").textContent),s=e.length;let l=0;if(e){let r=e[s-1];const o=Number(r.textContent);return r.classList.contains("visually-hidden")||(l=[...e].findIndex((t=>!t.classList.contains("visually-hidden")))),r.remove(),l>=1&&e[l-1].classList.remove("visually-hidden"),d(t,s>1&&n===o?Number(e[s-2].textContent):n)}return 0}var h;h=new URL(r("kyEFX").resolve("cKEZp"),import.meta.url).toString();var f;f=new URL(r("kyEFX").resolve("gcCvB"),import.meta.url).toString();var m;m=new URL(r("kyEFX").resolve("8xNye"),import.meta.url).toString();var w;w=new URL(r("kyEFX").resolve("0398L"),import.meta.url).toString();var x;x=new URL(r("kyEFX").resolve("3jUnA"),import.meta.url).toString();var L;L=new URL(r("kyEFX").resolve("ax4SW"),import.meta.url).toString();var y;y=new URL(r("kyEFX").resolve("4uYZ5"),import.meta.url).toString();var k;k=new URL(r("kyEFX").resolve("l1WNw"),import.meta.url).toString();var _;_=new URL(r("kyEFX").resolve("bA58A"),import.meta.url).toString();a=r("hqv3x");const S=new(0,o.booksAPI),E=[{img:e(m)}],A=document.querySelector(".shopping-wrapper"),C=(0,a.createBooksBoxTitle)(A,"Shopping List");let H=JSON.parse(localStorage.getItem("orderedBookID"))||[],N=[];let F,M,q,$,R,T=1;const B=document.documentElement.scrollWidth;function U(t,n,s){const l=(n-1)*s,r=l+(s-1);return t.map((({_id:t,book_image:n,list_name:s,author:o,title:i,description:a,buy_links:c},d)=>` <li data-id="${t}" class="book-card ${d>=l&&d<=r?"":"non-active"}">\n\n                                        <div class="book-image-div">\n                                          <img class="book-image" src='${n}' alt='${i}'>\n                                        </div>\n\n                                        <div class="book-card-content-div">\n\n                                          <div class="book_information">\n                                            <p class="book-title">${i}</p>\n                                            <p class="book-category">${s}</p>\n                                            <p class="book-description">${a||"No description"}</p>\n                                            <p class="book-author">${o}</p>\n                                          </div>\n                                          \n                                          <button data-id="${t}" class="bucket-btn">\n                                            <img src="${E[0].img}" alt="amazon">\n                                          </button>\n                                        \n                                          <ul class="market_placers_list list">\n                                      \n                                            <li class="marketplacer_li_one">\n                                              <a href="${c[0].url}" class="marketplacer_li_link link">\n                                                <img class="image-market" src="${e(h)}" alt="amazon">  \n                                              </a>\n                                            </li>\n                                      \n                                            <li class="marketplacer_li_two">\n                                              <a href="${c[1].url}" class="marketplacer_li_link link">\n                                                <img class="image-market" src="${e(f)}" alt="apple-books">      \n                                              </a>\n                                            </li>\n                                      \n                                          </ul>\n\n                                        </div>\n                                      </li>`)).join("\n")}function j({target:t}){if(t.classList.contains("bucket-btn")){const e=document.querySelectorAll(".bucket-btn");e.forEach((t=>t.setAttribute("disabled","")));const n=H.indexOf(t.dataset.id);H.splice(n,1),N=N.filter((e=>e._id!=t.dataset.id)),localStorage.removeItem("orderedBookID"),localStorage.setItem("orderedBookID",JSON.stringify(H));M.children[n].classList.add("shift-right");const s=n-3*Math.trunc(n/3),l=600;setTimeout((()=>{if(n+1<M.children.length){const t=n+1,e=n+(2-s)>=M.children.length-1?M.children.length-1:n+(2-s);for(let n=t;n<=e;n++){M.children[n].classList.add("shift-up")}}}),l),setTimeout((()=>{if(M.children[n].remove(),(0,a.displayOrdredAmountInShoppingBag)(H),e.forEach((t=>t.removeAttribute("disabled"))),0===M.children.length)I();else{[...M.children].forEach((t=>{t.classList.remove("shift-right"),t.classList.remove("shift-up")}));const t=[...M.children].findIndex(((t,e)=>e>n-1&&t.classList.contains("non-active")));-1!=t&&M.children[t].classList.remove("non-active"),Math.ceil(N.length/3)<q&&(T=v(F),q-=1,q<2&&F.remove()),M.innerHTML=U(N,T,3)}}),2*l)}}function I(){const t=document.createElement("div");t.classList.add("empty-shopping_booklist"),t.innerHTML=`<p class="empty-shopping-box-text">This page is empty, add some books and proceed to order.</p>\n                                <div class="empty-shopping-box-picturebox">\n                                  <picture>\n                                    <source\n                                      srcset="${e(w)} 1x, ${e(x)} 2x"\n                                      media="(max-width: 767.9px)"\n                                    >\n                                    <source\n                                    srcset="${e(L)} 1x, ${e(y)} 2x"\n                                      media="(min-width: 768px) and (max-width: 1439.8px)"\n                                    >\n                                    <source\n                                    srcset="${e(k)} 1x, ${e(_)} 2x"\n                                      media="(min-width: 1440px)"\n                                    >\n                                    <img \n                                      src=${e(k)}\n                                      alt="stack of books" \n                                    >\n                                  </picture>\n                                </div>`,A.append(t)}B<768?$=2:B>=768&&($=3),(0,a.scrollUp)(),H.length?async function(){R&&(R.abort(),console.log("abort previous ordered books fetch"));const t=(0,a.createLoader)(C);R=new AbortController;const e=await async function(t,e){try{const n=t.map((async t=>await S.getBookById(t,e)));return await Promise.all(n)}catch(t){const e=document.createElement("div");A.append(e),e.classList.add("error-box"),e.innerHTML='<p class="error-box-text">Sorry, there was a server error, please reload the page!!!</p>'}}(H,R);t.remove(),e.length&&(M=document.createElement("ul"),M.classList.add("list","shopping_booklist"),C.after(M),M.addEventListener("click",j),N=[],e.forEach((t=>N.push(t.data))),M.innerHTML=U(N,1,3),q=Math.ceil(N.length/3),q>1&&(F=c(N.length,3,$,"shopping_booklist_pagination"),A.append(F),T=d(F,1),F.addEventListener("click",(({target:t})=>{!function(t,e){e.classList.contains("left-double-arrow-btn")||e.classList.contains("left-double-arrow-svg")?(T=g(t),M.innerHTML=U(N,T,3)):e.classList.contains("left-arrow-btn")||e.classList.contains("left-arrow-svg")?(T=d(t,T-1),M.innerHTML=U(N,T,3)):e.classList.contains("left-three-dots-btn")||e.classList.contains("left-three-dots-svg")?(T=u(t,2),M.innerHTML=U(N,T,3)):e.classList.contains("number-btn")&&!e.classList.contains("active")?(T=d(t,Number(e.textContent)),M.innerHTML=U(N,T,3)):e.classList.contains("right-three-dots-btn")||e.classList.contains("right-three-dots-svg")?(T=b(t,2),M.innerHTML=U(N,T,3)):e.classList.contains("right-arrow-btn")||e.classList.contains("right-arrow-svg")?(T=d(t,T+1),M.innerHTML=U(N,T,3)):(e.classList.contains("right-double-arrow-btn")||e.classList.contains("right-double-arrow-svg"))&&(T=p(t),M.innerHTML=U(N,T,3))}(F,t)}))))}():I(),r("76jN1"),r("iNkvP"),r("kU5er"),r("8e037");const O=document.querySelector(".js-nav-shoppinglistlink"),X=document.querySelector(".js-mobile-nav-shoppinglistlink"),Z=document.querySelector(".js-mobile-shopping-bag-icon");O.classList.toggle("selected"),X.classList.toggle("mobile-selected"),Z.classList.toggle("mobile-selected");
//# sourceMappingURL=shopping_list_page.93c8d92a.js.map
