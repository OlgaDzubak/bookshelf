{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/runtime-d1d4f7e4ee460018.js","src/index.js","src/js/books.js","src/js/book_modal_window.js","node_modules/@parcel/runtime-js/lib/runtime-58508872ef88936c.js","node_modules/@parcel/runtime-js/lib/runtime-75424980c0743157.js"],"sourcesContent":["require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"EVgbq\\\":\\\"index.7eb24637.js\\\",\\\"aBrDb\\\":\\\"amazon_icon.9b1c5987.svg\\\",\\\"9ASNt\\\":\\\"ibooks.41e12916.svg\\\",\\\"hE6Rv\\\":\\\"index.0ec76dc0.js\\\"}\"));","import './js/header';\nimport './js/isChangeTheme';\nimport './js/support_ukraine';\nimport './js/books';\n\nimport './js/autorization_modal_window';\nimport './js/book_modal_window';\nimport './js/mobile_menu';\nimport './js/about_us_modal_window';\n\n\nconst homeLinkEl = document.querySelector('.js-nav-homelink');\nconst mobileHomeLinkEl = document.querySelector('.js-mobile-nav-homelink');\nhomeLinkEl.classList.toggle('selected');\nmobileHomeLinkEl.classList.toggle('mobile-selected');","import { booksAPI } from './booksAPI';\nimport { shortTitle, \n         createLoader, \n         createBooksBoxTitle, \n         changeActiveItem, \n         scrollToBoxTop, \n         scrollUp,\n         scrollTracker } from './help_functions';\n\nconst fetchBooks = new booksAPI();\n\nconst categoryListBox = document.querySelector(\".category-list-box\");\ncategoryListBox.addEventListener('click', showBooksOfCategory);\nconst booksBox = document.querySelector(\".books-box\");\nconst scrollUpBtn = document.querySelector('.btn-up-scroll');\n\nlet categoryList, itemAllCategories, abortCtrl1;\nlet firstLoading = true;\n\nscrollUpBtn.addEventListener('click', ()=>{\n    scrollUp(); \n    scrollUpBtn.classList.add('is-hidden-btn');\n});\n\nwindow.addEventListener('scroll', ()=>{scrollTracker(scrollUpBtn)});\n\nshowCategoryList();  \n\n// ФУНКЦІЇ виводу даних на сайт ----------------------------------------------------------------------------------\n\n        // Відправлення запиту і формування списку під час завантаження сторінки \n    async function showCategoryList() {\n        \n        scrollUp();\n        \n        //створюємо заголовок All categories і відразу натискаємо на нього, щоб визвати завантаження Best Sellers Books\n        itemAllCategories = document.createElement(\"h3\");\n        itemAllCategories.textContent = \"All categories\"\n        itemAllCategories.classList.add(\"category-list-item\", \"active\");\n        itemAllCategories.setAttribute(\"id\",\"all-categories-item\");\n        categoryListBox.prepend(itemAllCategories);\n        itemAllCategories.click();\n\n        //створюємо loader\n        const loader1 = createLoader(itemAllCategories);\n        \n        //завантажуємо з сервера список категорій книжок\n        const data = await fetchCategoryList();\n\n        //якщо отримали непусті дані, то малюємо розмітку\n        if (data.length) {\n\n            categoryList = document.createElement(\"ul\");\n            itemAllCategories.after(categoryList);\n            \n            categoryList.classList.add(\"category-list\");\n            categoryList.innerHTML = createCategoryListMarkup(data);\n            categoryListBox.classList.add(\"category-list-box-not-empty\");\n        }\n\n        //видаляємо loader після виконання запиту\n        loader1.remove(); \n        \n    };\n\n        // Обробка події натискання категорії в меню категорій книжок (відправлення запиту і формування списку книг категорії)\n    async function showBooksOfCategory({target}){\n        \n        //відміна попереднього запиту best-books або category-books\n        if (abortCtrl1) {\n            abortCtrl1.abort();\n            console.log(\"abort previous books fetch\");\n        }\n\n        if ((!target.classList.contains('category-list-item')) && (!target.classList.contains('js-btn-more'))){\n            return;\n        } else {\n\n            // переносимо клас .active на обрану категорію\n            changeActiveItem(itemAllCategories, categoryList, target);\n\n            //формуємо категорію в потрібному форматі для запиту на сервер\n            const category = target.id.split(\" \").join(\"%20\");\n            \n            //якщо оано пункт All categories, то формуємо список Best Sellers Books, якщо обрано іншу категорію, то формуємо список книжок для цієї категорії\n            if (category === 'all-categories-item') {\n\n                booksBox.innerHTML=\"\";\n                const booksBoxTitle = createBooksBoxTitle(booksBox, \"Best Sellers Books\");\n\n                if (!firstLoading) { \n                    scrollToBoxTop(booksBox);\n                }\n\n                const loader2 = createLoader(booksBoxTitle);\n\n                abortCtrl1 = new AbortController();\n                const data = await fetchBestSellersBooks(abortCtrl1);\n        \n                loader2.remove();\n        \n                if (data.length) {\n        \n                    const bestBooksList = document.createElement(\"ul\");\n                    bestBooksList.classList.add(\"list\",\"best-books-list\");\n                    booksBoxTitle.after(bestBooksList);\n                    bestBooksList.addEventListener('click', seeMore);\n        \n                    const pageWidth = document.documentElement.scrollWidth;\n        \n                    if (pageWidth < 768) {\n                        bestBooksList.innerHTML = createBestSellersBooksMarcup(data, 1);\n                    } else if (pageWidth < 1440 && pageWidth >= 768) {\n                        bestBooksList.innerHTML = createBestSellersBooksMarcup(data, 3);\n                    } else {\n                        bestBooksList.innerHTML = createBestSellersBooksMarcup(data, 5);\n                    }\n\n                    if (!firstLoading) {\n                        scrollToBoxTop(booksBox);\n                    }else {\n                        firstLoading = false;\n                    }\n                }\n            } else {\n                         \n                booksBox.innerHTML=\"\";\n                \n                const booksBoxTitle = createBooksBoxTitle(booksBox, target.id);\n\n                scrollToBoxTop(booksBox);\n\n                const loader2 = createLoader(booksBoxTitle);\n                \n                abortCtrl1 = new AbortController();\n                const data  = await fetchBooksOfCategory(category, abortCtrl1);\n                \n                loader2.remove();\n\n                if (data.length) {\n\n                    const categoryBooksList = document.createElement(\"ul\");\n                    booksBoxTitle.after(categoryBooksList);\n                    categoryBooksList.classList.add(\"list\", \"category-books-list\");\n\n                    const pageWidth = document.documentElement.scrollWidth;\n\n                    if (pageWidth < 768) {\n                        categoryBooksList.innerHTML = createBooksOfCategoryMarcup(data, 1);\n                    } else if (pageWidth < 1440 && pageWidth >= 768) {\n                        categoryBooksList.innerHTML = createBooksOfCategoryMarcup(data, 3);\n                    } else {\n                        categoryBooksList.innerHTML = createBooksOfCategoryMarcup(data, 5);\n                    }\n                    scrollToBoxTop(booksBox);\n\n                }\n            }\n        }\n    }\n\n        //Обробка події натискання кнопки seeMore\n    async function seeMore(event) {\n    \n        event.preventDefault();\n            \n        const { target } = event;\n                \n        if(!target.classList.contains('js-btn-more')) { return; }\n\n        showBooksOfCategory(event);\n    }\n    \n\n\n// ФУНКЦІЇ завантаження даних з бекенду -------------------------------------------------------------------------\n        \n        // Функція запиту на отримання назв категорій від бекенду\n    async function fetchCategoryList() {\n        try {\n            const { data } = await fetchBooks.getCategoryList();\n            if (!data.length) { \n                return Notify.failure(\"Can't find list of categories on the server. Please reload the page!\"); \n            }\n            return data;\n        }\n        catch (error) {\n            if (error.code !== 'ERR_CANCELED'){\n                \n                console.error(error);\n\n                const errorBox = document.createElement(\"div\");\n                itemAllCategories.after(errorBox);\n                errorBox.classList.add(\"error-box\");\n                errorBox.innerHTML = `<p class=\"error-box-text\">Sorry, there was a server error, please reload the page!!!</p>`;\n            }\n           return [];\n        } \n    }\n        // Функція запиту на отримання списку найкращіх книжок від бекенду\n    async function fetchBestSellersBooks(abortCtrl1) {\n\n        try {\n            const { data } = await fetchBooks.getTopBooks(abortCtrl1);\n            if (!data.length) { return Notify.failure(\"Can't find best sellers books on the server. Please reload the page!\"); }\n            return data;\n        }\n        catch (error){\n            if (error.code !== 'ERR_CANCELED'){\n\n                console.error(error);\n\n                const errorBox = document.createElement(\"div\");\n                booksBox.append(errorBox);\n                errorBox.classList.add(\"error-box\");\n                errorBox.innerHTML = `<p class=\"error-box-text\">Sorry, there was a server error, please reload the page!!!</p>`;\n\n            }\n            return [];\n        }\n    }\n        // Функція запиту на отримання списку книг однієї категорії від бекенду\n    async function fetchBooksOfCategory(category, abortCtrl1) {\n        try {\n\n            const { data } = await fetchBooks.getBooksByCategory(category, abortCtrl1);\n            if (!data.length) { return Notify.failure(\"Can't find books of category <\" + category + \"> on the server. Please reload the page!\"); }\n            return data;\n        }\n        catch (error) {\n            if (error.code !== 'ERR_CANCELED'){\n\n                console.error(error);\n\n                const errorBox = document.createElement(\"div\");\n                booksBox.append(errorBox);\n                errorBox.classList.add(\"error-box\");\n                errorBox.innerHTML = `<p class=\"error-box-text\">Sorry, there was a server error, please reload the page!!!</p>`;\n\n            }\n            return [];\n        } \n    }\n\n\n\n// ФУНКЦІЇ формування розмітки -----------------------------------------------------------------------------------\n\n        // розмітка списку категорій\n    function createCategoryListMarkup(data) {\n\n        let categoryListHTML = \"\";\n\n        data.forEach(category => {\n            const categoryLink = `  <li id=\"${category.list_name}\" class=\"category-list-item\"> \n                                       ${category.list_name}\n                                    </li> `;\n            categoryListHTML += categoryLink;\n        });\n\n        return categoryListHTML;\n    };\n        // розмітка best sellers books\n    function createBestSellersBooksMarcup(data, querty) {\n\n        const markup = data.map(({list_name, books}) => {\n            const category = `<p class=\"theme-book\">${list_name}</p>`;\n\n            if (books.length) {\n                let booksOfCategory = books.splice(0, querty).map(({_id, book_image, title, author}) => \n                `<li class=\"item-book\" data-id=\"${_id}\">\n                    <div class=\"img-owerlay\">\n                        <img src=\"${book_image}\" alt=\"${title}\" class=\"img-book\" loading=\"auto\">\n                        <div class=\"owerlay\">\n                            <p class=\"owerlay-content\">quick view</p>\n                        </div>\n                    </div>\n                    <p class=\"title-book\">${shortTitle(title, 17)}</p>\n                    <p class=\"title-author\">${shortTitle(author, 34)}</p>\n                </li>`).join('');\n\n                return `<li class=\"best-book-container\">${category}\n                            <ul class=\"list-books\">${booksOfCategory}</ul>\n                            <button type=\"button\" class=\"button-more js-btn-more\" id=\"${list_name}\">See more</button>\n                        </li>`\n            } else {\n                return `<li class=\"off-books best-book-container\">${category}\n                            <p class=\"off-books-text\">Sorry, there are no books in this category, please choose another category</p>\n                        </li>`\n            }}).join('');\n\n            return markup;\n    }\n        // розмітка books of category\n    function createBooksOfCategoryMarcup(data, querty) {\n\n        if(data.length){\n            const markup = data.map(({_id, book_image, author, title}) => \n            `<li class=\"item-book\" data-id=\"${_id}\">  \n                <div class=\"img-owerlay\">\n                    <img src=\"${book_image}\" alt=\"${title}\" class=\"img-book loading=\"auto\"\">\n                    <div class=\"owerlay\">\n                        <p class=\"owerlay-content\">quick view</p>\n                    </div>\n                </div>\n                <p class=\"title-book\">${shortTitle(title, 17)}</p>\n                <p class=\"title-author\">${shortTitle(author, 34)}</p>\n            </li>`\n            ).join('')\n\n            return markup;\n        } else {\n                return `<liv class=\"off-books\">\n                            <p class=\"off-books-text\">Sorry, there are no books in this category, please choose another category</p>\n                        </li>`\n        }\n    }","import { booksAPI } from './booksAPI';\nimport { displayOrdredAmountInShoppingBag } from './help_functions';\nimport amazon from '/src/images/svg/amazon_icon.svg';\nimport appleBook from '/src/images/svg/ibooks.svg';\n\nconst books = new booksAPI;\nlet book_Id, abortCtrl1;\n\nconst divContainerEl = document.querySelector('.books-box');\nconst divBackdropEl = document.querySelector('.book-modal-backdrop');\nconst btnCloseModal = document.querySelector('.btn-modal-close');\nconst btnAddEl = document.querySelector('.add');\nconst btnRemoveEl = document.querySelector('.remove');\nconst textEl = document.querySelector('.modal-message');\n\nconst objScroll = {\n    scrollPosition: 0,\n    disabledScroll() {\n        objScroll.scrollPosition = window.scrollY;\n        document.body.classList.add('block-scroll');\n        console.log(objScroll.scrollPosition);\n        document.body.style.cssText = `top: -${objScroll.scrollPosition}px;`;\n    },\n\n    enabledScroll() {\n        document.body.classList.remove('block-scroll');\n        document.body.style.cssText = `top: 0`\n        window.scroll({top: objScroll.scrollPosition})\n    },\n}\n\ndivContainerEl.addEventListener('click', onReadId);\n\nfunction onReadId({target, currentTarget}) {\n    \n    if (target.classList.contains('img-book') || target.classList.contains('owerlay')) {\n\n        book_Id = target.parentElement.parentElement.dataset.id;\n        createModalWindow(book_Id);\n        \n    } else if (target.classList.contains('owerlay-content')) {\n\n        book_Id = target.parentElement.parentElement.parentElement.dataset.id;\n        createModalWindow(book_Id);\n\n    } else if (target.classList.contains('title-book') || target.classList.contains('author')) {\n\n        book_Id = target.parentElement.dataset.id;\n        createModalWindow(book_Id);\n    }\n}\n\nasync function createModalWindow(book_Id) {\n\n    if (abortCtrl1) {\n        abortCtrl1.abort();\n        console.log(\"abort previous book fetch\");\n    }\n\n    objScroll.disabledScroll();\n\n    document.addEventListener(\"keydown\", event => {\n        if (event.key === 'Escape') {\n            onCloseModal();\n        }\n    }, {once: true} );\n\n    try {\n\n        abortCtrl1 = new AbortController;\n        const response = await books.getBookById(book_Id, abortCtrl1);\n        const { author, book_image, description, title, buy_links } = response.data;\n        const imageBox = document.querySelector('.book-img-div');\n        const nameBookEl = document.querySelector('#name-book');\n        const authorEl = document.querySelector('#author');\n        const descriptionEl = document.querySelector('#description');\n        const marketPlEl = document.querySelector('.market_placers_list');\n     \n        nameBookEl.textContent = title;\n        authorEl.textContent = author;\n\n        if (description === '') {\n            descriptionEl.textContent = 'No description';\n        } else {\n            descriptionEl.textContent = description;\n        }\n        \n        imageBox.innerHTML =   `<img src=\"${book_image}\" alt=\"${book_image}\" class=\"book-img-modal\" loading=\"auto\">`;\n        marketPlEl.innerHTML = `<li class=\"marketplacer_li marketplacer_li_one\">\n                                    <a href=\"${buy_links[0].url}\" class=\"marketplacer_li_link link\">\n                                    <img class=\"image-market\" src=\"${amazon}\" alt=\"amazon\">  \n                                    </a>\n                                </li>\n\n                                <li class=\"marketplacer_li marketplacer_li_two\">\n                                    <a href=\"${buy_links[1].url}\" class=\"marketplacer_li_link link\">\n                                    <img class=\"image-market\" src=\"${appleBook}\" alt=\"apple-books\">      \n                                    </a>\n                                </li>`\n\n        divBackdropEl.classList.toggle('is-hidden');\n        const orderedBookID_arr = JSON.parse(localStorage.getItem('orderedBookID'));\n\n        if (orderedBookID_arr === null || !orderedBookID_arr.includes(book_Id)) {\n            btnAddEl.classList.remove('is-hidden');\n        } else {\n            btnRemoveEl.classList.remove('is-hidden');\n            textEl.classList.remove('is-hidden');\n        }\n\n    } catch (error) {\n        if (error.code !== 'ERR_CANCELED'){\n            console.error(\"тут\");    \n            console.error(error);\n\n            const errorBox =  document.querySelector(\".book-modal-container\").createElement(\"div\");\n            btnCloseModal.after(errorBox);\n            errorBox.classList.add(\"error-box\");\n            errorBox.innerHTML = `<p class=\"error-box-text\">Sorry, there was a server error, please reload the page!!!</p>`;\n        }\n    }\n    \n};\n\nbtnCloseModal.addEventListener('click', onCloseModal);\n\nfunction onCloseModal() {\n    objScroll.enabledScroll();\n    divBackdropEl.classList.toggle('is-hidden');\n    btnRemoveEl.classList.add('is-hidden');\n    btnAddEl.classList.add('is-hidden');\n    textEl.classList.add('is-hidden');\n}\n\nbtnAddEl.addEventListener('click', addLocalStorage);\nbtnRemoveEl.addEventListener('click', removeLocalStorage);\n\nfunction addLocalStorage() {\n    btnAddEl.classList.add('is-hidden');\n    btnRemoveEl.classList.remove('is-hidden');\n    textEl.classList.remove('is-hidden');\n    const dataJson = localStorage.getItem('orderedBookID');\n    let arrLs = JSON.parse(dataJson); //book_Id\n    /* console.log(arrLs) */\n    if (arrLs === null) {\n        arrLs = [];\n    }\n    arrLs.push(book_Id);\n    localStorage.setItem('orderedBookID', JSON.stringify(arrLs));\n    displayOrdredAmountInShoppingBag(arrLs)\n};\n\nfunction removeLocalStorage() {\n    btnAddEl.classList.remove('is-hidden');\n    btnRemoveEl.classList.add('is-hidden');\n    textEl.classList.add('is-hidden');\n    const dataJson = localStorage.getItem('orderedBookID');\n    const arrLs = JSON.parse(dataJson);\n    let i = arrLs.indexOf(book_Id);\n    arrLs.splice(i, 1);\n    localStorage.removeItem('orderedBookID')\n    localStorage.setItem('orderedBookID', JSON.stringify(arrLs));\n    displayOrdredAmountInShoppingBag(arrLs)\n};","module.exports = require('./helpers/bundle-url').getBundleURL('EVgbq') + require('./helpers/bundle-manifest').resolve(\"aBrDb\");","module.exports = require('./helpers/bundle-url').getBundleURL('EVgbq') + require('./helpers/bundle-manifest').resolve(\"9ASNt\");"],"names":["parcelRequire","register","JSON","parse","$bpxeT","$f07733ea329a6322$var$fetchBooks","$3w7gl","booksAPI","$f07733ea329a6322$var$categoryListBox","document","querySelector","addEventListener","$f07733ea329a6322$var$showBooksOfCategory","$f07733ea329a6322$var$categoryList","$f07733ea329a6322$var$itemAllCategories","$f07733ea329a6322$var$abortCtrl1","$f07733ea329a6322$var$booksBox","$f07733ea329a6322$var$scrollUpBtn","$f07733ea329a6322$var$firstLoading","$f07733ea329a6322$var$_showCategoryList","$parcel$interopDefault","$2TvXO","mark","_callee","loader1","data","$fPiI6","scrollUp","createElement","textContent","classList","add","setAttribute","prepend","click","createLoader","$f07733ea329a6322$var$fetchCategoryList","_ctx","sent","length","after","innerHTML","$f07733ea329a6322$var$createCategoryListMarkup","remove","apply","this","arguments","_","$f07733ea329a6322$var$_showBooksOfCategory","param","target","category","booksBoxTitle","loader2","bestBooksList","pageWidth","booksBoxTitle1","loader21","data1","categoryBooksList","pageWidth1","abort","console","log","contains","changeActiveItem","id","split","join","createBooksBoxTitle","scrollToBoxTop","AbortController","$f07733ea329a6322$var$fetchBestSellersBooks","$f07733ea329a6322$var$seeMore","documentElement","scrollWidth","$f07733ea329a6322$var$createBestSellersBooksMarcup","$f07733ea329a6322$var$fetchBooksOfCategory","$f07733ea329a6322$var$createBooksOfCategoryMarcup","event","$f07733ea329a6322$var$_seeMore","preventDefault","$f07733ea329a6322$var$_fetchCategoryList","errorBox","getCategoryList","Notify","failure","t0","code","error","abortCtrl11","$f07733ea329a6322$var$_fetchBestSellersBooks","getTopBooks","append","abortCtrl12","$f07733ea329a6322$var$_fetchBooksOfCategory","getBooksByCategory","categoryListHTML","forEach","categoryLink","concat","list_name","querty","map","param1","books","booksOfCategory","splice","_id","book_image","title","author","shortTitle","window","scrollTracker","$f07733ea329a6322$var$showCategoryList","$90f1176d8015d60d$exports","getBundleURL","resolve","$4b0acbafe8863605$exports","$dc327292a98b2944$var$book_Id","$dc327292a98b2944$var$abortCtrl1","$dc327292a98b2944$var$books","$dc327292a98b2944$var$divContainerEl","$dc327292a98b2944$var$divBackdropEl","$dc327292a98b2944$var$btnCloseModal","$dc327292a98b2944$var$btnAddEl","$dc327292a98b2944$var$btnRemoveEl","$dc327292a98b2944$var$textEl","$dc327292a98b2944$var$objScroll","scrollPosition","disabledScroll","scrollY","body","style","cssText","enabledScroll","scroll","top","$dc327292a98b2944$var$createModalWindow","book_Id1","$dc327292a98b2944$var$_createModalWindow","response","_data","description","buy_links","imageBox","nameBookEl","authorEl","descriptionEl","marketPlEl","orderedBookID_arr","key","$dc327292a98b2944$var$onCloseModal","once","getBookById","url","toggle","localStorage","getItem","includes","currentTarget","parentElement","dataset","dataJson","arrLs","push","setItem","stringify","displayOrdredAmountInShoppingBag","i","indexOf","removeItem","$b8f9b7833fa37166$var$homeLinkEl","$b8f9b7833fa37166$var$mobileHomeLinkEl"],"version":3,"file":"index.7eb24637.js.map"}